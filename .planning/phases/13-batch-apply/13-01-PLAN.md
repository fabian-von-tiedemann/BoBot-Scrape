---
phase: 13-batch-apply
plan: 01
type: execute
depends_on: []
files_modified: []
---

<objective>
Re-convert all existing documents to apply Phase 12 frontmatter improvements (verksamhet and rutin properties).

Purpose: Apply frontmatter enrichment from Phase 12 to all 1143 existing converted files.
Output: All markdown files in converted/ updated with verksamhet and rutin fields in frontmatter.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-frontmatter-properties/12-01-SUMMARY.md
@convert.py

**Tech stack available:** pymupdf, python-docx, google-genai, csv module
**Established patterns:** metadata-dict-lookup (from Phase 12)
**Constraining decisions:**
- Phase 12: Always include verksamhet/rutin in frontmatter (empty string if not available)
- Phase 12: Property order: title, source_file, source_url, verksamhet, rutin, [AI metadata]
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clear existing converted files and re-run conversion</name>
  <files>converted/</files>
  <action>
    1. Remove all existing .md files in converted/ directory (they lack verksamhet/rutin fields)
    2. Run convert.py --force --skip-ai to regenerate all files with improvements from Phase 12
    3. Using --skip-ai because AI metadata isn't the focus - just frontmatter property additions
  </action>
  <verify>
    - ls converted/ shows category folders preserved
    - Sample file frontmatter contains verksamhet and rutin fields
    - Count of converted files matches expected (~1143)
  </verify>
  <done>All files re-converted with verksamhet and rutin properties in frontmatter</done>
</task>

<task type="auto">
  <name>Task 2: Verify frontmatter property improvements</name>
  <files>converted/</files>
  <action>
    Spot-check several converted files to confirm:
    1. Frontmatter contains verksamhet field (may be empty string for older documents)
    2. Frontmatter contains rutin field (should match category name)
    3. Field order is: title, source_file, source_url, verksamhet, rutin
    4. Existing fields (title, source_file, source_url) still present and correct
  </action>
  <verify>
    - head -10 on sample files shows all frontmatter fields including verksamhet and rutin
    - grep for "verksamhet:" finds entries in converted files
  </verify>
  <done>Frontmatter matches Phase 12 requirements - verksamhet and rutin present in all files</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] converted/ directory contains ~1143 markdown files
- [ ] Frontmatter includes verksamhet field
- [ ] Frontmatter includes rutin field
- [ ] Field order matches spec: title, source_file, source_url, verksamhet, rutin
- [ ] Existing fields (title, source_file, source_url) unchanged
</verification>

<success_criteria>

- All files re-converted
- verksamhet and rutin fields in all frontmatter
- Phase 13 complete, v2.2 milestone shipped
</success_criteria>

<output>
After completion, create `.planning/phases/13-batch-apply/13-01-SUMMARY.md`
</output>
