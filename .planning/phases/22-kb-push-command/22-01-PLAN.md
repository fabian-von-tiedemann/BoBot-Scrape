---
phase: 22-kb-push-command
plan: 01
type: execute
depends_on: []
files_modified: [.claude/commands/digi/push-kb.md]
domain: cli
---

<objective>
Create /digi:push-kb Claude command for syncing knowledge base content to GitHub repository.

Purpose: Enable one-command sync of all KB content (converted docs, indexes, prompts) to bobot-kb repo
Output: Working /digi:push-kb command that syncs converted/, indexes/, prompts/ to GitHub
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18-kb-delivery/18-01-SUMMARY.md

**Key context from Phase 18:**
- GitHub repo: fabian-von-tiedemann/bobot-kb (private)
- Used gh CLI for repo operations
- Full path: /opt/homebrew/bin/gh (or just `gh` if in PATH)
- Large pushes may need http.postBuffer increase

**Current KB structure:**
- converted/ — 15 verksamhet folders with markdown documents (~1086 files)
- indexes/ — 15 verksamhet INDEX files
- prompts/ — GENERAL.md, 15 *-PROMPT.md, combined/ with 15 *-COMBINED.md

**Command pattern:**
See .claude/commands/gsd/*.md for command structure examples
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create digi commands directory</name>
  <files>.claude/commands/digi/</files>
  <action>Create the directory .claude/commands/digi/ for BoBot-Scrape specific commands</action>
  <verify>ls .claude/commands/digi/ shows empty directory</verify>
  <done>Directory exists</done>
</task>

<task type="auto">
  <name>Task 2: Create push-kb command</name>
  <files>.claude/commands/digi/push-kb.md</files>
  <action>
Create Claude command file with:
- name: digi:push-kb
- description: Sync KB content to GitHub repo (converted, indexes, prompts)
- allowed-tools: Bash, Read

Command logic:
1. Clone bobot-kb repo to temp dir (or use existing clone)
2. rsync converted/ to temp/converted/ (delete orphans)
3. rsync indexes/ to temp/indexes/ (delete orphans)
4. rsync prompts/ to temp/prompts/ (delete orphans)
5. Git add all, commit with timestamp, push

Use rsync with --delete to ensure target matches source exactly.
Use gh CLI for clone/push operations.
Handle case where repo already cloned (pull latest first).

Command should output:
- Files synced count per folder
- Commit hash
- Success message with repo URL
  </action>
  <verify>
    - File exists at .claude/commands/digi/push-kb.md
    - Has valid YAML frontmatter with name, description, allowed-tools
    - Contains executable bash commands for sync operation
  </verify>
  <done>
    - push-kb.md created with full sync workflow
    - Command ready to use via /digi:push-kb
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] .claude/commands/digi/ directory exists
- [ ] push-kb.md file exists with valid frontmatter
- [ ] Command includes all three folders: converted, indexes, prompts
- [ ] Uses rsync with --delete for clean sync
- [ ] Uses gh CLI for git operations
</verification>

<success_criteria>

- /digi:push-kb command file created
- Command syncs all KB content (converted/, indexes/, prompts/)
- Uses established patterns (gh CLI, rsync)
- Ready for user to execute
</success_criteria>

<output>
After completion, create `.planning/phases/22-kb-push-command/22-01-SUMMARY.md`:

# Phase 22 Plan 01: KB Push Command Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `.claude/commands/digi/push-kb.md` - KB sync command

## Decisions Made

[Key decisions and rationale]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase complete. Milestone v3.0 Digi Commands complete.
</output>
